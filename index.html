<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, viewport-fit=cover">
<meta name="theme-color" content="#0b1220">
<title>Fence Installer Academy</title>

<style>
:root{
  --bg:#0b1220;
  --bg2:#0f1a2e;
  --card:#111c33;
  --text:#e7ecf4;
  --muted:#9aa4b2;
  --accent:#5fb3ff;
  --ok:#3ddc84;
  --line:#1f2a44;
  --radius:14px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,Inter,Segoe UI,Roboto,Arial;
  background:linear-gradient(180deg,var(--bg),var(--bg2));
  color:var(--text);
}
header{
  padding:16px 18px;
  font-weight:700;
  letter-spacing:.3px;
}
main{padding:16px 16px 90px}
.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:16px;
  margin-bottom:14px;
}
h1,h2,h3{margin:0 0 10px}
p{color:var(--muted);margin:6px 0}
button{
  background:#142243;
  color:var(--text);
  border:1px solid var(--line);
  padding:10px 14px;
  border-radius:12px;
  cursor:pointer;
}
button.primary{background:var(--accent);color:#081220}
.row{display:flex;gap:10px;flex-wrap:wrap}
.list{display:flex;flex-direction:column;gap:10px}
.item{
  padding:14px;
  border:1px solid var(--line);
  border-radius:12px;
  background:#0f1930;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
nav{
  position:fixed;
  bottom:0;left:0;right:0;
  background:#0b1220;
  border-top:1px solid var(--line);
  display:flex;
}
nav button{
  flex:1;
  background:none;
  border:none;
  padding:14px 0;
  color:var(--muted);
}
nav button.active{color:var(--accent)}
.badge{
  background:var(--accent);
  color:#081220;
  padding:3px 8px;
  border-radius:8px;
  font-size:12px;
  font-weight:700;
}
</style>
</head>

<body>
<header>Fence Installer Academy</header>
<main id="app"></main>

<nav>
  <button onclick="go('#home')" id="tab-home">Home</button>
  <button onclick="go('#course')" id="tab-course">Course</button>
  <button onclick="go('#progress')" id="tab-progress">Progress</button>
  <button onclick="go('#profile')" id="tab-profile">Profile</button>
</nav>

<script>
const modules=[...Array(8)].map((_,m)=>({
  id:m+1,
  title:`Module ${m+1}`,
  lessons:[1,2,3].map(l=>({
    id:l,
    title:`Lesson ${m+1}.${l}`,
    text:`This is unique content for module ${m+1}, lesson ${l}. 
Here we explain real fence installation steps, tools, safety notes and workflow.`
  }))
}));

const progress=JSON.parse(localStorage.getItem('progress')||'{}');

function save(){localStorage.setItem('progress',JSON.stringify(progress));}

function go(h){
  location.hash=h;
  render();
}

window.addEventListener('hashchange',()=>setTimeout(render,0));

function render(){
  const app=document.getElementById('app');
  const hash=location.hash||'#home';
  document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
  const tab=document.getElementById('tab-'+hash.replace('#','').split('/')[0]);
  if(tab)tab.classList.add('active');

  if(hash==='#home'){
    app.innerHTML=`
      <div class="card">
        <h2>Welcome</h2>
        <p>Offline-first Fence Installer Academy</p>
        <button class="primary" onclick="go('#course')">Open course</button>
      </div>`;
  }

  else if(hash==='#course'){
    app.innerHTML='<div class="list">'+modules.map(m=>`
      <div class="item">
        <div>${m.title}</div>
        <button onclick="go('#module/${m.id}')">Open</button>
      </div>`).join('')+'</div>';
  }

  else if(hash.startsWith('#module/')){
    const id=+hash.split('/')[1];
    const m=modules.find(x=>x.id===id);
    app.innerHTML=`
      <div class="card">
        <h2>${m.title}</h2>
        <div class="list">
          ${m.lessons.map(l=>`
            <div class="item">
              <div>${l.title}</div>
              <button onclick="go('#lesson/${id}/${l.id}')">Open</button>
            </div>`).join('')}
        </div>
        <br><button onclick="go('#course')">Back</button>
      </div>`;
  }

  else if(hash.startsWith('#lesson/')){
    const [,,mId,lId]=hash.split('/');
    const m=modules.find(x=>x.id==mId);
    const l=m.lessons.find(x=>x.id==lId);
    const key=`${mId}-${lId}`;
    app.innerHTML=`
      <div class="card">
        <h2>${l.title}</h2>
        <p>${l.text}</p>
        <div class="row">
          <button onclick="progress['${key}']=true;save();render()">Mark completed</button>
          <button onclick="go('#module/${mId}')">Back</button>
        </div>
      </div>`;
  }

  else if(hash==='#progress'){
    const done=Object.keys(progress).length;
    app.innerHTML=`
      <div class="card">
        <h2>Progress</h2>
        <p>${done} / 24 lessons completed</p>
      </div>`;
  }

  else if(hash==='#profile'){
    app.innerHTML=`
      <div class="card">
        <h2>Profile</h2>
        <p>Settings coming soon</p>
      </div>`;
  }
}

render();
</script>
</body>
</html>
